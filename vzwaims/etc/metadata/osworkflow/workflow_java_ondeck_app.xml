<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE workflow PUBLIC "-//OpenSymphony Group//DTD OSWorkflow 2.6//EN" "http://www.opensymphony.com/osworkflow/workflow_2_8.dtd">
<workflow>
	<initial-actions>
		<action id="100" name="Start Java Workflow">
			<results>
				<unconditional-result old-status="Completed" status="Underway" step="200" owner="JAVA_APP_PROGRAMMING_CONTENT_MANAGER"/>
			</results>
			<post-functions>
				<function type="class">
					<arg name="class.name">com.netpace.aims.workflow.ApplicationStatusEntry</arg>
					<!-- Java Platform ID is 44 -->
					<arg name="platformId">44</arg>
					<arg name="ringNumber">172</arg>
					<!-- look AIMS_LIFECYCLE_PHASES -->
					<arg name="oldStatus">1</arg>
					<arg name="newStatus">1</arg>						
				    <arg name="ringNumber">172</arg>						    							
				</function>
				
				<function type="class">
					<arg name="class.name">com.netpace.aims.workflow.WorkItemEntry</arg>
					<!-- extend this class to take <arg name="actionPageUrl">/editJavaApps.do?task=edit&tab=ProcessingInfo&javaAppId={appId} -->
					<!-- replace {appId} by trans var, then save to DB -->
					<!-- instead of action dropdown show above URL  -->
				</function>
				<function type="class">
					<arg name="class.name">com.netpace.aims.workflow.WorkflowNotification</arg>
					<arg name="eventId">2001</arg>
					<arg name="previousStatusId">1</arg>
					<arg name="newStatusId">1</arg>
					<arg name="previousState">Java on deck workflow kick started</arg>
					<arg name="currentState">Programming Content Review Pending</arg>
				</function>
				<function type="class">
					<arg name="class.name">com.netpace.aims.workflow.WorkflowJournalEntry</arg>
					<arg name="fromState">SUBMITTED</arg>
					<arg name="toStates">Pending Programming Content Review</arg>
				</function>				
			</post-functions>
		</action>
	</initial-actions>
	
	<steps>
		<!--
		Programming Content Review  
		-->
		<step id="200" name="Programming Content Review">
			<actions>
				<action id="201" name="Approve">
					<restrict-to>
						<conditions type="AND">
							<condition type="class">
								<arg name="class.name">com.opensymphony.workflow.util.StatusCondition</arg>
								<arg name="status">Underway</arg>
							</condition>
						</conditions>
					</restrict-to>
					<pre-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowStatusEntry</arg>
				    	</function>
					</pre-functions>
					<results>
						<!--  owner assign in the split -->
						<unconditional-result status="Underway" old-status="Completed" split="300" />
					</results>
					<post-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.ApplicationStatusEntry</arg>
						    <arg name="platformId">44</arg>
							<arg name="ringNumber">172</arg>						    														
						    <arg name="oldStatus">1</arg>	
							<arg name="newStatus">2003</arg>							
						</function>					
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkItemEntry</arg>
						</function>						
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowNotification</arg>
							<arg name="eventId">2004</arg>
							<arg name="previousStatusId">1</arg>
							<arg name="newStatusId">2003</arg>
							<arg name="previousState">Pending Programming Content Review</arg>
							<arg name="currentState">Programming Content Approved</arg>
						</function>						
			      		<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowJournalEntry</arg>
						    <arg name="fromState">Pending Programming Content Review </arg>
						    <arg name="toStates">Programming Content Approved</arg>
						</function>						
					</post-functions>
				</action>
				<action id="202" name="Deny">
					<restrict-to>
						<conditions type="AND">
							<condition type="class">
								<arg name="class.name">com.opensymphony.workflow.util.StatusCondition</arg>
								<arg name="status">Underway</arg>
							</condition>
						</conditions>
					</restrict-to>
					<pre-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowStatusEntry</arg>
				    	</function>
					</pre-functions>
					<results>
						<unconditional-result status="Rejected" old-status="Completed" step="900" />
					</results>
					<post-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.ApplicationStatusEntry</arg>
						    <arg name="platformId">44</arg>
							<arg name="ringNumber">172</arg>
						    <arg name="statusRejected">true</arg>
						</function>
						<function type="class">							
							<arg name="class.name">com.netpace.aims.workflow.WorkflowNotification</arg>
							<!--  notify alliance -->
							<arg name="eventId">2019</arg>
							<arg name="previousStatusId">2002</arg>
							<arg name="newStatusId">2008</arg>							
						</function>						
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowJournalEntry</arg>
						    <arg name="fromState">Pending Programming Content Review</arg>
						    <arg name="toStates">Rejected</arg>							
						</function>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowCompletion</arg>
						</function>
					</post-functions>
				</action>
				<action id="203" name="Request For Information (RFI)">
					<restrict-to>
						<conditions type="AND">
							<condition type="class">
								<arg name="class.name">com.opensymphony.workflow.util.StatusCondition</arg>
								<arg name="status">Underway</arg>
							</condition>
						</conditions>
					</restrict-to>
					<pre-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowStatusEntry</arg>
				    	</function>
					</pre-functions>
					<results>
						<unconditional-result status="Underway" step="250" old-status="InfoRequested"  />
					</results>
					<post-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.ApplicationStatusEntry</arg>
						    <arg name="platformId">44</arg>
							<arg name="ringNumber">172</arg>
						    <arg name="oldStatus">1</arg>						    
							<arg name="newStatus">2002</arg>	
						    <arg name="rfi">true</arg>						    
						</function>							
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkItemEntry</arg>
						</function>												
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowNotification</arg>
							<!-- notify alliance -->
							<arg name="eventId">2005</arg>
							<arg name="previousStatusId">1</arg>
							<arg name="newStatusId">2002</arg>
							<arg name="previousState">Pending Programming Content Review</arg>
							<arg name="currentState">RFI Programming Content Review</arg>
						</function>						
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowJournalEntry</arg>
						    <arg name="fromState">Pending Programming Content Review</arg>
						    <arg name="toStates">RFI Programming Content Review</arg>
						</function>
					</post-functions>
				</action>
			</actions>
		</step>

		<!--
		RFI on Programming Content Review  
		-->
		<step id="250" name="RFI Programming Content Review">
			<actions>
				<action id="251" name="Resubmit">
					<restrict-to>
						<conditions type="AND">
							<condition type="class">
								<arg name="class.name">com.opensymphony.workflow.util.StatusCondition</arg>
								<arg name="status">Underway</arg>
							</condition>
						</conditions>
					</restrict-to>
					<pre-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowStatusEntry</arg>
				    	</function>
					</pre-functions>
					<results>
						<unconditional-result status="Underway" old-status="Completed" step="200" owner="JAVA_APP_PROGRAMMING_CONTENT_MANAGER"/>
					</results>
					<post-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.ApplicationStatusEntry</arg>
						    <arg name="platformId">44</arg>
							<arg name="ringNumber">172</arg>
						    <arg name="oldStatus">2002</arg>
						    <arg name="newStatus">1</arg>							
						</function>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkItemEntry</arg>
						</function>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowNotification</arg>
							<!-- notify PC manager -->
							<arg name="eventId">2012</arg>
							<arg name="previousStatusId">2002</arg>
							<arg name="newStatusId">1</arg>
							<arg name="previousState">RFI Programming Content Review</arg>
							<arg name="currentState">Pending Programming Content Review</arg>
						</function>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowJournalEntry</arg>
						    <arg name="fromState">RFI Programming Content Review</arg>
						    <arg name="toStates">Pending Programming Content Review</arg>
						</function>						
					</post-functions>
				</action>
			</actions>
		</step>

		<!--
		Legal Review 
		-->
		<step id="400" name="Legal Review">
			<actions>
				<action id="401" name="Approve">
					<restrict-to>
						<conditions type="AND">
							<condition type="class">
								<arg name="class.name">com.opensymphony.workflow.util.StatusCondition</arg>
								<arg name="status">Underway</arg>
							</condition>
						</conditions>
					</restrict-to>
					<pre-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowStatusEntry</arg>
				    	</function>
					</pre-functions>
					<results>
						<unconditional-result status="Underway" old-status="Completed" join="600"/>
					</results>
					<post-functions>						
						<!-- notify Alliance -->
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowNotification</arg>
							<arg name="eventId">2007</arg>
							<arg name="previousState">Pending Legal Review</arg>
							<arg name="currentState">Legal Approved</arg>
						</function>						
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowJournalEntry</arg>
							<arg name="fromState">Pending Legal Review</arg>
						    <arg name="toStates">Legal Approved</arg>
						</function>
					</post-functions>
				</action>
				<action id="402" name="Deny">
					<restrict-to>
						<conditions type="AND">
							<condition type="class">
								<arg name="class.name">com.opensymphony.workflow.util.StatusCondition</arg>
								<arg name="status">Underway</arg>
							</condition>
						</conditions>
					</restrict-to>
					<pre-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowStatusEntry</arg>
				    	</function>
					</pre-functions>
					<results>
						<unconditional-result status="Rejected" old-status="Completed" step="900" />
					</results>
					<post-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.ApplicationStatusEntry</arg>
						    <arg name="platformId">44</arg>
							<arg name="ringNumber">172</arg>
						    <arg name="statusRejected">true</arg>
						</function>						
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowNotification</arg>
							<arg name="eventId">2019</arg>
							<arg name="previousStatusId">2003</arg>
							<arg name="newStatusId">2008</arg>
						</function>						
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowJournalEntry</arg>
						    <arg name="fromState">Pending Legal Review</arg>
						    <arg name="toStates">Rejected</arg>
						</function>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.AbandonWorkflowState</arg>
							<arg name="stateId">500</arg>
						</function>	
					</post-functions>
				</action>
				<action id="403" name="Request For Information (RFI)">
					<restrict-to>
						<conditions type="AND">
							<condition type="class">
								<arg name="class.name">com.opensymphony.workflow.util.StatusCondition</arg>
								<arg name="status">Underway</arg>
							</condition>
						</conditions>
					</restrict-to>
					<pre-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowStatusEntry</arg>
				    	</function>
					</pre-functions>
					<results>
						<unconditional-result status="Underway" old-status="InfoRequested" step="450" />
					</results>
					<post-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.ApplicationStatusEntry</arg>
						    <arg name="platformId">44</arg>
							<arg name="ringNumber">172</arg>
						    <arg name="oldStatus">2003</arg>						    
							<arg name="newStatus">2004</arg>						    
						    <arg name="rfi">true</arg>						    
						</function>	
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.vds.WorkItemEntry</arg>
							<arg name="parallelStepIds">500,550</arg>
						</function>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowNotification</arg>
							<arg name="eventId">2009</arg>
							<arg name="previousStatusId">2003</arg>
							<arg name="newStatusId">2004</arg>
							<arg name="previousState">Pending Legal Review</arg>
							<arg name="currentState">RFI Legal Review</arg>
						</function>						
 						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowJournalEntry</arg>
						    <arg name="fromState">Pending Legal Review</arg>
						    <arg name="toStates">RFI Legal Review</arg>
						</function>
					</post-functions>
				</action>				
			</actions>
		</step>
		
		<!--
		RFI on Legal Review  
		-->
		<step id="450" name="RFI Legal Review">
			<actions>
				<action id="451" name="Resubmit">
					<restrict-to>
						<conditions type="AND">
							<condition type="class">
								<arg name="class.name">com.opensymphony.workflow.util.StatusCondition</arg>
								<arg name="status">Underway</arg>
							</condition>
						</conditions>
					</restrict-to>
					<pre-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowStatusEntry</arg>
				    	</function>
					</pre-functions>
					<results>
						<unconditional-result status="Underway" old-status="Completed" step="400" owner="JAVA_APP_LEGAL_MANAGER"/>
					</results>
					<post-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.ApplicationStatusEntry</arg>
						    <arg name="platformId">44</arg>
							<arg name="ringNumber">172</arg>
						    <arg name="oldStatus">2004</arg>
							<arg name="newStatus">2003</arg>
						</function>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.vds.WorkItemEntry</arg>
							<arg name="parallelStepIds">500,550</arg>
						</function>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowNotification</arg>
							<!-- notify Legal manager -->
							<arg name="eventId">2013</arg>
							<arg name="previousStatusId">2004</arg>
							<arg name="newStatusId">2003</arg>
							<arg name="previousState">RFI Legal Review</arg>
							<arg name="currentState">Pending Legal Review</arg>
						</function>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowJournalEntry</arg>
						    <arg name="fromState">RFI Legal Review</arg>
						    <arg name="toStates">Pending Legal Review</arg>
						</function>						
					</post-functions>
				</action>
			</actions>
		</step>
		
		<!--
		Content Standard Review 
		-->
		<step id="500" name="Content Standard Review">
			<actions>
				<action id="501" name="Approve">
					<restrict-to>
						<conditions type="AND">
							<condition type="class">
								<arg name="class.name"> com.opensymphony.workflow.util.StatusCondition</arg>
								<arg name="status">Underway</arg>
							</condition>
						</conditions>
					</restrict-to>
					<pre-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowStatusEntry</arg>
				    	</function>
					</pre-functions>
					<results>
						<unconditional-result status="Underway" old-status="Completed" join="600"/>
					</results>
					<post-functions>						
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowNotification</arg>
							<arg name="eventId">2016</arg>
							<arg name="previousState">Pending Content Standard Review</arg>
							<arg name="currentState">Content Standard Approved</arg>
						</function>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowJournalEntry</arg>
						    <arg name="fromState">Pending Content Standard Review</arg>
						    <arg name="toStates">Content Standard Approved</arg>							
						</function>						
					</post-functions>	
				</action>
				<action id="502" name="Deny">
					<restrict-to>
						<conditions type="AND">
							<condition type="class">
								<arg name="class.name">com.opensymphony.workflow.util.StatusCondition</arg>
								<arg name="status">Underway</arg>
							</condition>
						</conditions>
					</restrict-to>
					<pre-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowStatusEntry</arg>
				    	</function>
					</pre-functions>
					<results>
						<unconditional-result status="Rejected" old-status="Completed" step="900" />
					</results>
					<post-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.ApplicationStatusEntry</arg>
						    <arg name="platformId">44</arg>
							<arg name="ringNumber">172</arg>
						    <arg name="statusRejected">true</arg>
						</function>
						<function type="class">							
							<arg name="class.name">com.netpace.aims.workflow.WorkflowNotification</arg>
							<arg name="eventId">2019</arg>
							<arg name="previousStatusId">2003</arg>
							<arg name="newStatusId">2008</arg>							
						</function>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowJournalEntry</arg>
						    <arg name="fromState">Pending Content Standard Review</arg>
						    <arg name="toStates">Rejected</arg>							
						</function>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.AbandonWorkflowState</arg>
							<arg name="stateId">400</arg>
						</function>	
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowCompletion</arg>
						</function>
					</post-functions>
				</action>
				<action id="503" name="Request For Information (RFI)">
					<restrict-to>
						<conditions type="AND">
							<condition type="class">
								<arg name="class.name">com.opensymphony.workflow.util.StatusCondition</arg>
								<arg name="status">Underway</arg>
							</condition>
						</conditions>
					</restrict-to>
					<pre-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowStatusEntry</arg>
				    	</function>
					</pre-functions>
					<results>
						<unconditional-result status="Underway" old-status="InfoRequested" step="550" />
					</results>
					<post-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.ApplicationStatusEntry</arg>
						    <arg name="platformId">44</arg>
							<arg name="ringNumber">172</arg>
						    <arg name="oldStatus">2003</arg>						    
							<arg name="newStatus">2004</arg>						    				    
						    <arg name="rfi">true</arg>						    
						</function>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowNotification</arg>
							<arg name="eventId">2015</arg>
							<arg name="previousStatusId">2003</arg>
							<arg name="newStatusId">2004</arg>
							<arg name="previousState">Pending Content Standard Review</arg>
							<arg name="currentState">RFI Content Standard Review</arg>
						</function>						
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.vds.WorkItemEntry</arg>
							<arg name="parallelStepIds">400,450</arg>
						</function>			
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowJournalEntry</arg>
						    <arg name="fromState">Pending Content Standard Review</arg>
						    <arg name="toStates">RFI Content Standard Review</arg>
						</function>
					</post-functions>
				</action>
			</actions>
		</step>		


		<!--
		RFI on Content Standard Review  
		-->
		<step id="550" name="RFI Content Standard Review">
			<actions>
				<action id="551" name="Resubmit">
					<restrict-to>
						<conditions type="AND">
							<condition type="class">
								<arg name="class.name">com.opensymphony.workflow.util.StatusCondition</arg>
								<arg name="status">Underway</arg>
							</condition>
						</conditions>
					</restrict-to>					
					<pre-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowStatusEntry</arg>
				    	</function>
					</pre-functions>					
					<results>
						<unconditional-result status="Underway" old-status="Completed" step="500" owner="JAVA_APP_CONTENT_STANDARD_MANAGER"/>
					</results>
					<post-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.ApplicationStatusEntry</arg>
							<!-- Change status ??? -->
						    <arg name="platformId">44</arg>
							<arg name="ringNumber">172</arg>
						    <arg name="oldStatus">2004</arg>
							<arg name="newStatus">2003</arg>
						</function>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.vds.WorkItemEntry</arg>
							<arg name="parallelStepIds">400,450</arg>
						</function>	
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowNotification</arg>
							<!-- notify content std manager -->
							<arg name="eventId">2020</arg>
							<!-- Change status ??? -->
							<arg name="previousStatusId">2004</arg>
							<arg name="newStatusId">2003</arg>
							<arg name="previousState">RFI Content Standard Review</arg>
							<arg name="currentState">Pending Content Standard Review</arg>
						</function>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowJournalEntry</arg>
						    <arg name="fromState">RFI Content Standard Review</arg>
						    <arg name="toStates">Pending Content Standard Review</arg>
						</function>						
					</post-functions>
				</action>
			</actions>
		</step>

		<!--  
		Tax Review
		-->
		<step id="700" name="Tax Review">
			<actions>
				<action id="701" name="Tax Category Updated" >
					<restrict-to>
						<conditions type="AND">
							<condition type="class">
								<arg name="class.name">com.opensymphony.workflow.util.StatusCondition</arg>
								<arg name="status">Underway</arg>
							</condition>
						</conditions>
					</restrict-to>
					<pre-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowStatusEntry</arg>
				    	</function>
					</pre-functions>
					<results>
						<unconditional-result status="Underway" old-status="Completed" step="800"  />
					</results>
					<post-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.ApplicationStatusEntry</arg>
						    <arg name="platformId">44</arg>
							<arg name="ringNumber">172</arg>
						    <arg name="oldStatus">2005</arg>						    
						    <arg name="newStatus">2009</arg>						    							
						</function>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkItemEntry</arg>
						</function>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowNotification</arg>
							<arg name="eventId">2003</arg>
							<arg name="previousStatusId">2005</arg>
							<arg name="newStatusId">2009</arg>
							<arg name="previousState">Pending Tax Review</arg>
							<arg name="currentState">Tax Approved</arg>
						</function>
			      		<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowJournalEntry</arg>
						    <arg name="fromState">Pending Tax Review</arg>
						    <arg name="toStates">Tax Approved</arg>
						</function>				
					</post-functions>
				</action>
				<action id="702" name="Request For Information (RFI)">
					<restrict-to>
						<conditions type="AND">
							<condition type="class">
								<arg name="class.name">com.opensymphony.workflow.util.StatusCondition</arg>
								<arg name="status">Underway</arg>
							</condition>
						</conditions>
					</restrict-to>
					<pre-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowStatusEntry</arg>
				    	</function>
					</pre-functions>
					<results>
						<unconditional-result status="Underway"  old-status="InfoRequested" step="750" />
					</results>
					<post-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.ApplicationStatusEntry</arg>
						    <arg name="platformId">44</arg>
							<arg name="ringNumber">172</arg>
						    <arg name="oldStatus">2005</arg>						    
							<arg name="newStatus">2006</arg>						    				    					    
						    <arg name="rfi">true</arg>						    
						</function>			
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkItemEntry</arg>
						</function>									
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowNotification</arg>
							<arg name="eventId">2011</arg>
							<arg name="previousStatusId">2005</arg>
							<arg name="newStatusId">2006</arg>
							<arg name="previousState">Pending Tax Review</arg>
							<arg name="currentState">RFI Tax Review</arg>
						</function>						
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowJournalEntry</arg>
						    <arg name="fromState">Pending Tax Review</arg>
						    <arg name="toStates">RFI Tax Review</arg>
						</function>
					</post-functions>
				</action>				
				<action id="703" name="Tax Category Unavailable">
					<restrict-to>
						<conditions type="AND">
							<condition type="class">
								<arg name="class.name">com.opensymphony.workflow.util.StatusCondition</arg>
								<arg name="status">Underway</arg>
							</condition>
						</conditions>
					</restrict-to>
					<pre-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowStatusEntry</arg>
				    	</function>
					</pre-functions>
					<results>
						<unconditional-result status="Underway" old-status="Completed"  step="-1" owner="JAVA_APP_TAX_MANAGER"/>
					</results>
					<post-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.ApplicationStatusEntry</arg>
							<!-- set status to PENDING TAX APPROVAL -->
						    <arg name="platformId">44</arg>
							<arg name="ringNumber">172</arg>
						    <arg name="oldStatus">2005</arg>
							<arg name="newStatus">2007</arg>
							<arg name="pendingTaxCategory">true</arg>
						</function>
						<!-- DOES IT RECREATE THE ITEM ??? -->
						<!--
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowNotification</arg>
							<arg name="eventId">2019</arg>
							<arg name="previousStatusId">2005</arg>
							<arg name="newStatusId">2007</arg>
							<arg name="previousState">Pending Tax Review</arg>
							<arg name="currentState">Tax Review On Hold</arg>
						</function>
						-->						
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkItemEntry</arg>
						</function>						

						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowJournalEntry</arg>
						    <arg name="fromState">Pending Tax Review</arg>
						    <arg name="toStates">Tax Review On Hold</arg>							
						</function>
					</post-functions>
				</action>				
			</actions>
		</step>
		
		
		<!--
		RFI on Tax Review  
		-->
		<step id="750" name="RFI Tax Review">
			<actions>
				<action id="751" name="Resubmit">
					<restrict-to>
						<conditions type="AND">
							<condition type="class">
								<arg name="class.name">com.opensymphony.workflow.util.StatusCondition</arg>
								<arg name="status">Underway</arg>
							</condition>
						</conditions>
					</restrict-to>
					<pre-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowStatusEntry</arg>
				    	</function>
					</pre-functions>					
					<results>
						<unconditional-result status="Underway" old-status="Completed" step="700" owner="JAVA_APP_TAX_MANAGER"/>
					</results>
					<post-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.ApplicationStatusEntry</arg>
						    <arg name="platformId">44</arg>
							<arg name="ringNumber">172</arg>
						    <arg name="oldStatus">2006</arg>
							<arg name="newStatus">2007</arg>
						</function>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkItemEntry</arg>
						</function>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowNotification</arg>
							<arg name="eventId">2021</arg>
							<arg name="previousStatusId">2006</arg>
							<arg name="newStatusId">2007</arg>
							<arg name="previousState">RFI Tax Review</arg>
							<arg name="currentState">Pending Tax Review</arg>
						</function>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowJournalEntry</arg>
						    <arg name="fromState">RFI Tax Review</arg>
						    <arg name="toStates">Pending Tax Review</arg>
						</function>						
					</post-functions>
				</action>
			</actions>
		</step>
		
			
		<!--
		Approved 
		-->
		<step id="800" name="Approved">
			<actions>
				<action id="801" name="Approved" finish="TRUE" auto="TRUE">
					<restrict-to>
						<conditions type="AND">
							<condition type="class">
								<arg name="class.name">com.opensymphony.workflow.util.StatusCondition</arg>
								<arg name="status">Underway</arg>
							</condition>
						</conditions>
					</restrict-to>
					<results>
						<unconditional-result old-status="Underway" status="Completed" step="-1" />
					</results>
					<post-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowCompletion</arg>
						</function>
					</post-functions>
				</action>
			</actions>
		</step>
			
		<!-- 
		Rejected
		-->
		<step id="900" name="Rejected">
			<actions>
				<action id="901" name="Reject" finish="TRUE" auto="TRUE">
					<restrict-to>
						<conditions type="AND">
							<condition type="class">
								<arg name="class.name">com.opensymphony.workflow.util.StatusCondition</arg>
								<arg name="status">Completed</arg>
							</condition>
						</conditions>
					</restrict-to>
					<results>
						<unconditional-result old-status="Underway" status="Completed" step="-1" />
					</results>
					<post-functions>
						<function type="class">
							<arg name="class.name">com.netpace.aims.workflow.WorkflowCompletion</arg>
						</function>						
					</post-functions>
				</action>
			</actions>
		</step>	
	</steps>	
	
	<!--
	Split Legal/Content Standard Review 
	-->
	<splits>
		<split id="300">
			<unconditional-result old-status="Completed" status="Underway" owner="JAVA_APP_LEGAL_MANAGER" step="400" >
				<!--  
				<post-functions>
					<function type="class">
						<arg name="class.name">com.netpace.aims.workflow.WorkflowNotification</arg>						
						<arg name="eventId"></arg>
						<arg name="previousStatusId">47</arg>
						<arg name="newStatusId">42</arg>
						<arg name="previousState">Programming Content Approved</arg>
						<arg name="currentState">Legal Review Pending</arg>
					</function>
				</post-functions>
				-->
			</unconditional-result>
			<unconditional-result old-status="Completed" status="Underway" owner="JAVA_APP_CONTENT_STANDARD_MANAGER" step="500">
				<!--
				<post-functions>
					<function type="class">
						<arg name="class.name">com.netpace.aims.workflow.WorkflowNotification</arg>
						<! -   - notify content std manager - - >
						<arg name="eventId">2007</arg>
						<arg name="previousStatusId">2003</arg>
						<arg name="newStatusId">2005</arg>
						<arg name="previousState">Programming Content Approved</arg>
						<arg name="currentState">Content Standard Review Pending</arg>
					</function>
				</post-functions>
				-->				
			</unconditional-result>
		</split>
	</splits>
		
	<!--
	Join Legal/Content Standard Review 
	-->		
	<joins>
		<join id="600">
			<conditions type="AND">
				<condition type="beanshell">
					<arg name="script"><![CDATA["Completed".equals(jn.getStep(400).getStatus()) && "Completed".equals(jn.getStep(500).getStatus()) ]]></arg>
				</condition>
			</conditions>
			<unconditional-result old-status="Completed" status="Underway" step="700" owner="JAVA_APP_TAX_MANAGER" >
				<post-functions>
					<function type="class">
						<arg name="class.name">com.netpace.aims.workflow.ApplicationStatusEntry</arg>
						<!-- Java Platform ID is 44 -->
						<arg name="platformId">44</arg>
						<arg name="ringNumber">172</arg>
						<!-- look AIMS_LIFECYCLE_PHASES -->
						<arg name="oldStatus">2005</arg>
						<arg name="newStatus">2007</arg>
					</function>
					<function type="class">
						<arg name="class.name">com.netpace.aims.workflow.WorkItemEntry</arg>
					</function>
					<function type="class">
						<arg name="class.name">com.netpace.aims.workflow.WorkflowNotification</arg>
						<!-- notify tax manager -->
						<arg name="eventId">2010</arg>
						<arg name="previousStatusId">2005</arg>
						<arg name="newStatusId">2007</arg>
						<arg name="previousState">Legal/Content Standard Approved</arg>
						<arg name="currentState">Pending Tax Review</arg>
					</function>
				</post-functions>
			</unconditional-result>
		</join>	
	</joins>
	
</workflow>